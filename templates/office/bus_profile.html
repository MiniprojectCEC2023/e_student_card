<!doctype html>
<html>
  <head>
    <title>Student Information</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-jWFGP+AAOsxIgRRxv5ar1Hth8akl5DdNV5g5rLGBchGWtLILMfI1dR+ebvMPbNRGAv8Xnyodf3c+Q2Sog0Tpgw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
      /* Add some basic styling to the page */
      body {
        font-family: Arial, sans-serif;
      }
      h1 {
        color: #1a73e8;
        text-align: center;
      }
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th, td {
        text-align: left;
        padding: 8px;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #f2f2f2;
      }
      ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
      }
      li {
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <h1>Student Information</h1>
    <a href="/reg_bus" class="logout-btn"><i class="fas fa-home"></i></a>
    <table>
      <tr>
        <th>Name:</th>
        <td>{{ student[1] }}</td>
      </tr>
      <tr>
        <th>Register Number:</th>
        <td>{{ student[5] }}</td>
      </tr>
      <tr>
        <th>Branch:</th>
        <td>{{ student[4] }}</td>
      </tr>
      <tr>
        <th>Semester:</th>
        <td>{{ student[3] }}</td>
      </tr>
      <tr>
        <tr>
          <th>Route:</th>
          <td>{{ student[8]}}</td>
        </tr>
        <tr>
          <tr>
            <th>Fare:</th>
            <td>{{ student[9]}}</td>
          </tr>
          <tr>
        <th>Fee status:</th>

        <td>
          {% if student[7] == 1  %}
          <span style="color: green;">Fee paid</span>
          {% else %}
            <span style="color: red;">Not paid</span>
        {% endif %}
        
        </td>
      </tr>
      <tr>
        <th>select routes</th>
        <td>
          <form id="update-route-form" action="/update_bus_route/{{ student[5] }}" method="post">
            <label for="route_name">Select a Route:</label>
            <select id="route_name" name="route_name">
              <option value="Route A" {% if student[6] == "Route A" %}selected{% endif %}>Route A</option>
              <option value="Route B" {% if student[6] == "Route B" %}selected{% endif %}>Route B</option>
              <option value="Route C" {% if student[6] == "Route C" %}selected{% endif %}>Route C</option>
              <option value="Route E" {% if student[6] == "Route E" %}selected{% endif %}>Route E</option>
              <option value="Route F" {% if student[6] == "Route F" %}selected{% endif %}>Route F</option>
              <option value="Route G" {% if student[6] == "Route G" %}selected{% endif %}>Route G</option>
              <option value="Route H" {% if student[6] == "Route H" %}selected{% endif %}>Route H</option>
              <option value="Route I" {% if student[6] == "Route I" %}selected{% endif %}>Route I</option>
              <option value="Route J" {% if student[6] == "Route J" %}selected{% endif %}>Route J</option>
            </select>
            <br>
            <input type="submit" value="Update Route">
          </form>
          
          
          
        </td>
      </tr>
      <tr id="update_bus_info">
        <th>Update BUS Information:</th>
        <td>
          <ul>
            <li>
              <form method="POST" action="/update_infobus/{{ student[5] }}" id="update_form">
                <label for="fee_paid">Fee Paid:</label>
                <select id="fee_paid" name="fee_paid">
                  <option value="0" {% if student[7] == "0" %}selected{% endif %}>Do not pay</option>
                  <option value="1" {% if student[7] == "1" %}selected{% endif %}>Pay</option>
                </select>
                <br>
                <input type="submit" value="Update">
              </form>
            </li>
          </ul>
        </td>
      </tr>
    </table>
    <script>
      function handleSubmit(form) {
        form.addEventListener('submit', (event) => {
          event.preventDefault();
          const formData = new FormData(form);
          fetch(form.action, {
            method: form.method,
            body: formData,
          })
            .then(response => {
              if (response.ok) {
                location.reload();
              }
            })
            .catch(error => {
              console.error(error);
            });
        });
      }
      
      const updateRouteForm = document.getElementById('update-route-form');
      handleSubmit(updateRouteForm);
      
      const updateBusInfoForm = document.getElementById('update_form');
      handleSubmit(updateBusInfoForm);
      
      
      



    </script>
  </body>
</html>

